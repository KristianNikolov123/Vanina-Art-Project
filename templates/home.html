{% extends "base.html" %}

{% block title %}–û–±—Ä–∞—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
            <h1 class="display-5 mb-4">üí¨ –î—ä—Å–∫–∞ –∑–∞ –æ–±—Ä–∞—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞</h1>
            <p class="lead mb-4">–ê–∫–æ –Ω–µ—â–æ –Ω–µ —Ç–∏ —Ö–∞—Ä–µ—Å–≤–∞, –∏–º–∞—à –∏–¥–µ—è –∏–ª–∏ –∏—Å–∫–∞—à –ø—Ä–æ–º—è–Ω–∞ ‚Äì –Ω–∞–ø–∏—à–∏ –≥–æ —Ç—É–∫!</p>
            <form method="post" action="{{ url_for('submit_feedback') }}" class="mb-4">
                <div class="input-group">
                    <textarea class="form-control" name="message" rows="2" maxlength="300" placeholder="–ù–∞–ø–∏—à–∏ —Å–≤–æ—è—Ç–∞ –∫—Ä–∏—Ç–∏–∫–∞, –∏–¥–µ—è –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ..." required></textarea>
                    <button class="btn btn-primary" type="submit">–ò–∑–ø—Ä–∞—Ç–∏</button>
                </div>
            </form>
            <div class="feedback-bubbles mt-4 text-start">
                {% for fb in feedbacks %}
                    <div class="bubble mb-2 p-3 rounded shadow-sm" style="background: #f1f1f1; display: inline-block; max-width: 80%;">
                        <span style="white-space: pre-line;" id="msg-{{ fb['id'] }}">{{ fb['message'] }}</span>
                        <div class="text-end" style="font-size: 0.85em; color: #888;">{{ fb['formatted_time'] }}</div>
                        <form method="post" action="{{ url_for('delete_feedback', feedback_id=fb['id']) }}" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ –∏—Å–∫–∞—Ç–µ –¥–∞ –∏–∑—Ç—Ä–∏–µ—Ç–µ —Ç–∞–∑–∏ –æ–±—Ä–∞—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞?')">–ò–∑—Ç—Ä–∏–π</button>
                        </form>
                        <button class="btn btn-sm btn-outline-secondary" onclick="toggleEdit({{ fb['id'] }})">–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π</button>
                        <form method="post" action="{{ url_for('edit_feedback', feedback_id=fb['id']) }}" id="edit-form-{{ fb['id'] }}" style="display:none; margin-top: 8px;">
                            <div class="input-group">
                                <input type="text" class="form-control" name="edit_message" value="{{ fb['message'] }}" maxlength="300" required>
                                <button type="submit" class="btn btn-primary btn-sm">–ó–∞–ø–∞–∑–∏</button>
                                <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEdit({{ fb['id'] }})">–û—Ç–∫–∞–∑</buton>
                           </div>
                        </form>
                    </div>
                {% else %}
                    <div class="text-muted">–í—Å–µ –æ—â–µ –Ω—è–º–∞ –æ–±—Ä–∞—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞. –ë—ä–¥–∏ –ø—ä—Ä–≤–∏—è—Ç!</div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/home.js') }}"></script>
{% endblock %}